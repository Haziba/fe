<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="js/enums.js"></script>
<script src="js/button.js"></script>
<script src="js/collisions.js"></script>
<script src="js/global.js"></script>
<script src="js/pubsub.js"></script>
<script src="js/socketManager.js"></script>
<script src="js/tileHelper.js"></script>
<script src="js/spriteHandler.js"></script>
<script src="js/inputHandler.js"></script>
<script src="js/control.js"></script>
<script src="js/gameClass.js"></script>
<script src="js/tileManager.js"></script>
<script src="js/tile.js"></script>
<script src="js/soldierManager.js"></script>
<script src="js/soldier.js"></script>
<script src="js/stageManager.js"></script>
<script src="js/hud.js"></script>
<script src="js/shipManager.js"></script>
<script src="js/ship.js"></script>
<script>
	$(function(){
		Global.canvas = $("#gameCanvas")[0];
		var context = Global.canvas.getContext("2d");
		
		var spritesInitialised, initData;
		
		var sprite = new Image();
		sprite.onload = function(){
			InputHandler.Initialise(Global.canvas);
			SpriteHandler.Initialise(context, sprite);
			
			spritesInitialised = true;
			
			if(initData)
				StartGame($("#gameControls"), initData);
		};
		
		window.bus.sub('socket init', function(data){
			initData = data;
			
			if(spritesInitialised)
				StartGame($("#gameControls"), initData);
		});
		
		sprite.src = "img/spritesheet.png";
	});
</script>
<style>
	button{
		width: 150px;
	}
	button span{
		font-size: 22px;
	}
</style>
<body style="background-color: #4d2600">
	<div id="gameWrapper" style="border: 1px solid #000; width: 800px; height: 800px; position: absolute; left: 50%; margin-left: -400px">
		<div style="width: 750px; height: 600px; border: 1px solid #000; margin: auto; top: 25px; position: relative; background-image: url(img/backdrop.png)">
			<canvas id="gameCanvas" style="border: 1px solid #000; width: 800px; height: 800px; position: relative; top: 50%; left: 50%">
			</canvas>
		</div>
		<div id="gameControls" style="width: 750px; height: 125px; border: 1px solid #000; margin: auto; top: 50px; position: relative; background-color: #fff">
			<button id="unitDone" style="position: absolute; right: 25px; top: 25px;">
				<span>Unit Done</span>
			</button>
			<button id="endTurn" style="position: absolute; right: 25px; top: 75px;">
				<span>End Turn</span>
			</button>
		</div>
		<div style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px; background-image: url(img/Overlay.png); pointer-events: none">
		</div>
	</div>
</body>